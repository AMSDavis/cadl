<ProjectSchemaDefinitions xmlns="http://schemas.microsoft.com/build/2009/properties">
  <FileExtension Name=".cadl"
                 ContentType="CadlFile" />

  <ContentType Name="CadlFile"
               DisplayName="Cadl definitions file"
               ItemType="CadlCompile" />

  <ItemType Name="CadlCompile"
            DisplayName="Cadl compiler" />

  <Rule Name="CadlCompile"
        DisplayName="File Properties"
        PageTemplate="generic"
        Description="File Properties"
        OverrideMode="Extend">
    <Rule.DataSource>
      <DataSource Persistence="ProjectFile" Label="Configuration" ItemType="CadlCompile"
                  HasConfigurationCondition="false" SourceOfDefaultValue="AfterContext" />
    </Rule.DataSource>

    <Rule.Categories>
      <Category Name="Cadl" DisplayName="Cadl" />
      <Category Name="Misc" DisplayName="Misc" />
    </Rule.Categories>

    <DynamicEnumProperty Name="{}{ItemType}" DisplayName="Build Action"  Category="Advanced"
               Description="How the file relates to the build and deployment processes."
               EnumProvider="ItemTypes" />

    <StringProperty Name="FullPath"
                    DisplayName="Full Path"
                    ReadOnly="true"
                    Category="Misc"
                    Description="Location of the file.">
      <StringProperty.DataSource>
        <DataSource Persistence="Intrinsic" ItemType="CadlCompile"
                    PersistedName="FullPath" SourceOfDefaultValue="AfterContext" />
      </StringProperty.DataSource>
    </StringProperty>

    <StringProperty Name="FileNameAndExtension"
                    DisplayName="File Name"
                    ReadOnly="true"
                    Category="Misc"
                    Description="Name of the file or folder.">
      <StringProperty.DataSource>
        <DataSource Persistence="Intrinsic" ItemType="CadlCompile"
                    PersistedName="FileNameAndExtension" SourceOfDefaultValue="AfterContext" />
      </StringProperty.DataSource>
    </StringProperty>


    <BoolProperty Name="Compile" DisplayName="Compile Cadl"
                  Category="Cadl" Default="true"
                  Description="Specifies if this file is compiled or only imported by other files.">
      <BoolProperty.DataSource>
        <DataSource ItemType="CadlCompile" SourceOfDefaultValue="AfterContext"
                    PersistenceStyle="Attribute" HasConfigurationCondition="false" />
      </BoolProperty.DataSource>
    </BoolProperty>

  </Rule>
</ProjectSchemaDefinitions>
